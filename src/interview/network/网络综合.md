### 5-18

- 输入url到浏览器显示的过程
1. URL解析
> 1.1 地址解析和编码：首先判断输入的字符串是搜索关键字还是url，如果是url就开始编码（中文会编码）  
> 1.2 HSTS：（一种新的Web安全协议），会强制客户端使用HTTPS域服务器建立连接 （比如http变成https）  
> 1.3 缓存检查：浏览器先去看强缓存是否过期，如果未过期，直接读取缓存，如果过期，则进行协商缓存。
> 协商缓存由服务器决定是否使用缓存，若协商缓存失效，则返回200，重新返回资源并更新缓存，生效则返回304，继续从缓存中读取资源。
> （协商缓存之前需要DNS，TCP，HTTP连接）
> 
2. DNS解析
> 通过域名得到对应ip地址的过程：  
> 2.1 查询www.baidu.com  
> 2.2 访问客户端DNS缓存：浏览器缓存->系统缓存（host）->路由器缓存  
> 2.3 访问本地DNS服务器(互联网提供商，如联通电信移动等)，如果有则返回，否则让本地DNS服务器继续去找  
> 2.4 本地去问DNS根服务器，发现是.com区域管理的，告诉本地去问它  
> 2.5 本地去问.com顶级域名服务器，告诉本地去问baidu.com主区域的DNS服务器  
> 2.6 本地去问baidu.com主域名服务器，找到对应的ip地址，返回给本地  
> 2.7 本地同时用户，baidu.com对应的ip地址，同时缓存这个ip地址，下次可以直接访问缓存  
> 
3. TCP三次握手建立连接
> 建立连接阶段，需要经过3次握手（3次的具体过程，客户端和服务端对应的状态，为什么是3次能否2次？）
> 
4. 发送HTTP请求
> 发送HTTP请求过程：构建HTTP请求报文（请求方法、请求头、请求体），
> 通过TCP协议发送到服务器指定端口（HTTP默认80/8080，HTTPS默认443）  
>
5. 服务端响应
> 服务端响应完成后，会返回HTTP报文（状态码，响应头和响应报文）(状态码1xx,2xx,3xx,4xx,5xx种类作用)
> 
6. 浏览器解析渲染页面

7. TCP四次挥手断开连接
> (4次握手的具体过程，客户端服务端各自的状态，为什么比建立连多一次，为什么客户端还要再等2MSL？)
> 

